<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Bank Dashboard</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" /> 
    <link rel="stylesheet" href="../CSS/testing.css" /> 
    <script src="../JavaScript/template.js">populateUsername()</script>               
  </head>
  <body>
    <div class="app">
      <header class="app-header">
        <div class="app-header-logo">
          <div class="logo">
            <h1 class="logo-title">
              <span>Online Banking</span>
            </h1>
          </div>
        </div>
       
        <div class="app-header-actions">
          <button class="user-profile">
            <h1> Welcome back, <span id="username"></span> !</h1>
          </button>
 
      </header>
        <div class="app-body-main-content">
          <section class="service-section">
            <h2>Service</h2>
            <div class="tiles">
              <article class="tile">
                <div class="tile-header">
                  <div class="send-card-image">
                    <img src="../arrow.jpeg" class="card-image" width="40" height="40" />
                </div>
                  <h3>
                    <span>Transfer Money</span>
                  </h3>
                </div>
                <a href="/transactions">
                  <span>Go to service</span>
                  <span class="icon-button">
                    <!-- <i class="ph-caret-right-bold"></i> -->
                    <img src="../right-arrow.jpeg" alt="right-icon">
                  </span>
                </a>
              </article>
              <article class="tile">
                <div class="tile-header">
                  <div class="send-card-image">
                    <img src="../report2.jpeg" class="card-image" width="40" height="40" />
                </div>
                  <h3>
                    <span>View Report</span>
                  </h3>
                </div>
                <a href="/personal/report">
                  <span>Go to service</span>
                  <span class="icon-button">
                    <img src="../right-arrow.jpeg" alt="right-icon">
                  </span>
                </a>
              </article>
              <article class="tile">
                <div class="tile-header">
                  <div class="send-card-image">
                    <img src="../customerSupp.jpeg" class="card-image" width="50" height="50" />
                </div>
                  <h3>
                    <span>Customer Support</span>
                  </h3>
                </div>
                <a href="/customer/support">
                  <span>Go to service</span>
                  <span class="icon-button">
                    <img src="../right-arrow.jpeg" alt="right-icon">
                  </span>
                </a>
              </article>
            </div>
            <div class="service-section-footer">   
              <!-- <p>Services are paid according to the current state of the currency and tariff.</p>  -->
              <p>Designed and created by ASU online Software Team.</p>
              <p class="rights">All rights are reserved</p>
            </div>
          </section>
        </div>
        
      </div>
    </div>
    <script>populateUsername()</script>
    <script>
     window.onload = function() {
        templateUserName()
        getCookie()
    };
    
  function getCookie(cname) {
    let name = cname + "=";
    let decodedCookie = decodeURIComponent(document.cookie);
    let ca = decodedCookie.split(';');
    for(let i = 0; i <ca.length; i++) {
      let c = ca[i];
      while (c.charAt(0) == ' ') {
        c = c.substring(1);
      }
      if (c.indexOf(name) == 0) {
        return c.substring(name.length, c.length);
      }
  }
  return "";
}
    //console.log("HERE", req.cookies.token)
   function templateUserName() {
   console.log(getCookie("token"))
    const myHeaders = new Headers();
    myHeaders.append("x-auth-token", getCookie("token"));
    myHeaders.append("Content-Type", "application/json");
     // Fetch user data using the token in the headers
     fetch("http://52.158.43.53:8080/api/users/info", {
        headers: myHeaders
    })
    .then((response) => {
        if (!response.ok) {
            throw new Error('Failed to fetch user data');
        }
        return response.json(); // Parse response body as JSON
    })
    .then((data) => {
        console.log("User Data:", data.name); // Print user data to console
        document.getElementById("username").textContent = data.name
    })
    .catch((error) => console.error(error));
   }
   
    </script>
    <!-- <script src="https://unpkg.com/phosphor-icons"></script>
      
    <script defer type="text/javascript" id="chatbot-initials-script" src="https://chat-bbl.noform.ai/script-chatbot.js"
    data-server-url="https://app.noform.ai"
    data-bot-id="661fd1353ba824a2e8ce069f"></script> -->
       
  </body>
</html>